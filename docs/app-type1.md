#无用户身份的应用平台接入

**无用户身份**是指应用平台只为工业云提供应用能力，不关心工业云平台的用户账户体系。

这种接入通常由应用平台提供一个对接账户，通过接口输出对接能力，供工业云平台对接使用。

本章节中，需要应用系统提供的接口，下文只简单描述流程，具体以应用系统接口文档为准。

##参考流程

```sequence
participant 用户
participant 工业云平台
participant 应用平台

工业云平台->应用平台: 获取应用列表(说明、接口和文档)
应用平台->工业云平台: 更新应用列表(说明、接口和文档)
工业云平台->工业云平台: 应用列表更新
用户->工业云平台: 购买应用
工业云平台->工业云平台: 服务状态更新
工业云平台->用户: 提供应用接口和文档
用户->工业云平台: 调用应用接口
工业云平台->应用平台: 调用应用接口
应用平台->应用平台: 记录账单
应用平台->工业云平台: 返回调用结果
工业云平台->工业云平台: 记录账单
工业云平台->用户: 返回调用结果
工业云平台->应用平台: 查询账单，对账
```

##接口概览

参考上一章节的流程

需要工业云平台向应用平台提供的接口有：

| 接口名称 | 接口功能 |
| :- | :- |
| UpdateProducts | 更新应用产品列表 |

需要应用平台向工业云平台提供的接口有：

| 接口名称 | 接口功能 |
| :- | :- |
| DescribeProducts | 查询应用产品列表 |
| DescribeBalance | 查询付费余额 |
| DescribeBillDetail | 查询账单明细数据 |
| DescribeBillResourceSummary | 查询账单汇总数据 |

##工业云平台接口说明

基础参数参考**应用系统对接说明-[平台场景]()**中的基础参数描述

**[更新应用产品列表]()接口说明**

https请求方式POST

```
https://cloud.industry.com/app/v1/:appname/products?<公共请求参数>&..
```

请求参数说明：

请求JSON包体

```
{
    "action": "add",
    "product_list": [{
        "id": 1002,
        "name": "人流密度",
    }]
}
```

| 参数名称 | 必选 | 描述 |
| :- | :- | :- |
| client_appid | 是 | 公共参数，平台应用(如算法平台)的appid(又称login_appid) |
| time_stamp | 是 | 公共参数，时间戳，格式参考ISO8601标准，使用UTC时间。格式为：YYYY-MM-DDThh:mm:ssZ |
| signature | 是 | 公共参数，请求消息签名 |
| action | 是 | 更新操作类型，包括：全量更新-"clear_and_update"，增加-"add"，删除-"delete"，修改-"modify"|
| product_list | 是 | 要更新的产品列表，进行删除操作时，product节点内只需要携带"product_id"字段 |

product_list的字段说明：

| 参数名称 | 必选 | 描述 |
| :- | :- | :- |
| id | 是 | 唯一ID(应用平台内部唯一) |
| name | 是 | 产品名称 |

返回内容：
 
返回结果示例：

```json
{
    "code": 0,
    "msg": ""
}
```