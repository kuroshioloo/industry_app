#应用系统对接说明

##对接说明

系统对接涉及工业云平台和应用系统彼此提供接口

 - 对于由工业云平台提供接口的相关细节，参考下文[通用基础字段说明]()
 - 需要应用系统提供接口的场景，本文档描述需求和接口要求，具体以应用系统接口文档为准

##通用基础字段说明

对接分为两类：

###用户场景

对于由用户触发并且需要为应用系统提供用户身份的场景，对接接口需要提供用户身份相关的参数。

如：

 - 某应用系统页面要展示从工业云平台单点登录的用户/企业信息

这种场景下，通常是由工业云平台为应用系统提供接口，对接以[账号/应用对接系统](https://industry-account2.readthedocs.io/en/latest/)打通作为前提。

接口多以AccessToken作为基础字段，被调用方可以通过[账号/应用对接系统](https://industry-account2.readthedocs.io/en/latest/)的相关接口进行有效性验证。

###平台场景

对于非用户触发场景，需要两个系统之间建立不依赖用户登陆态的互信，基础字段和**用户场景**存在差异。

如：

 - 某应用系统向工业云平台提交能力清单

**基础字段说明**

请求参数说明：

| 参数名称 | 必选 | 描述 |
| :- | :- | :- |
| client_appid | 是 | 公共参数，平台应用(如算法平台)的appid(又称login_appid) |
| time_stamp | 是 | 公共参数，时间戳，格式参考ISO8601标准，使用UTC时间。格式为：YYYY-MM-DDThh:mm:ssZ |
| signature | 是 | 公共参数，请求消息签名 |

* 所需的client_appid(又称login_appid)和appsecret，和[账号/应用对接系统](https://industry-account2.readthedocs.io/en/latest/)对接时获取到的字段值保持一致。

signature生成说明：

- 根据参数名称将除签名外所有请求参数按照字母先后顺序排列
- 对参数名称和参数值进行URL编码
- 构造URL请求：参数名和参数值之间用 “=” 号连接，参数和参数之间用 “＆” 号连接
- 构造被签名串被签名串的构造规则为: 被签名串 = HTTP请求方式 + “\n” + uri + “\n” + url请求串
（”\n” 是换行符，不要将 “" 转义）
- 将API密钥的私钥(appsecret)作为key，生成被签名串的HMAC-SHA256签名
- 将签名进行Base64编码